# Поиск заказов через API Syrve
Этот проект представляет собой веб-приложение на PHP для поиска заказов через API Syrve. Приложение реализует многошаговый процесс, включающий выбор заведения, получение API‑токена, поиск заказов по номеру телефона и дате доставки, а также подробный просмотр информации о заказе.

![Logo](https://febrein.top/apisyrve/icon.png)

## Особенности
### Многошаговый процесс работы:
- **Шаг 1. Выбор заведения:** Пользователь выбирает API‑логин, соответствующий выбранному заведению, для получения токена.
- **Шаг 2. Поиск заказов:** После успешной авторизации производится поиск заказов по номеру телефона и диапазону дат доставки.
- **Шаг 3. Отображение результатов:** Результаты поиска выводятся в виде списка заказов с возможностью просмотра подробной информации через модальные окна.

### Рекурсивный рендеринг данных заказа:
Функция `renderOrderDetails` обрабатывает вложенные структуры данных, включая ассоциативные и индексированные массивы.

### Поддержка переводов ключевых полей:
Возможность отображения описательных названий для полей заказа посредством словаря переводов.

### Интеграция с API Syrve:
- Получение токена доступа.
- Запрос списка организаций.
- Поиск заказов по телефону и дате доставки.

## Стек технологий
- **Язык:** PHP (с использованием cURL для работы с внешними API)
- **Фронтенд:** HTML5, CSS3, Bootstrap 4.5
- **Сессии:** PHP сессии для хранения токена и данных поиска
- **Дата и время:** Работа с объектами DateTime для форматирования даты в соответствии с требованиями API

## Основные файлы
- **logins.php:**
    - Содержит массив с API‑логинами, где ключ – уникальный идентификатор (UUID), а значение – название заведения.

- **index.php:**
  - Реализует многошаговый процесс:

    - Обработка входа и получение токена.

    - Отправка запросов к API для получения организаций и поиска заказов.

    - Рендеринг результатов поиска с использованием рекурсивных функций для корректного отображения вложенных данных.

## Конфигурация
# Константы API:
- В файле index.php определены константы для URL API:

    - API_URL_ACCESS_TOKEN – URL для получения токена.

    - API_URL_ORGANIZATIONS – URL для получения списка организаций.

    - API_URL_ORDERS_BY_PHONE – URL для поиска заказов по телефону.

# Параметры перевода ключевых полей:
  - Ассоциативный массив $fieldTranslations позволяет задавать более понятные названия для ключевых параметров заказа. При необходимости словарь можно расширить дополнительными переводами.

# Функции:
safe(): Безопасный вывод значений для защиты от XSS.

renderOrderDetails() и renderValue(): Рекурсивный рендеринг данных заказа с учётом вложенных структур.

getApiToken(), getOrganizations(), searchOrders(): Функции для работы с API Syrve с использованием cURL.

formatDateForApi(): Форматирование даты согласно требованиям API.

## Скриншоты
![Logo](https://febrein.top/apisyrve/Screenshot_1.png)
![Logo](https://febrein.top/apisyrve/Screenshot_2.png)
![Logo](https://febrein.top/apisyrve/Screenshot_3.png)
![Logo](https://febrein.top/apisyrve/Screenshot_34.png)
